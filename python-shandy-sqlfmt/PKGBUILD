# Maintainer: AlphaJack <alphajack at tuta dot io>

pkgname="python-shandy-sqlfmt"
_pkgname="${pkgname/python-/}"
pkgver=0.28.1
pkgrel=1
pkgdesc="An opinionated CLI tool that formats your SQL files"
url="https://pypi.org/project/shandy-sqlfmt/"
license=("Apache-2.0")
arch=("any")
depends=("python"
    "python-click"
    "python-tqdm"
    "python-platformdirs"
    "python-backports.cached_property"
    "python-tomli"
    "python-black"
    "python-gitpython"
    "flake8"
    "python-isort"
    "mypy"
)
makedepends=("python-build"
    "python-hatchling"
    "python-installer"
    "python-poetry"
    "python-wheel")
options=("!strip")
source=("https://files.pythonhosted.org/packages/source/${_pkgname::1}/${_pkgname}/${_pkgname/-/_}-${pkgver}.tar.gz")
b2sums=('4bcf545d83e83d0350a77551d86ad394d58e46972a4c0172fa9599bafb2e57db0316c3dfc2ca9f6932104ee064fe3059ac305c51e2c0da56f8122e460da18bfe')

build() {
    cd "${_pkgname/-/_}-$pkgver"
    python -m build --wheel --no-isolation
}

package() {
    cd "${_pkgname/-/_}-$pkgver"
    python -m installer --destdir="$pkgdir" dist/*.whl
}
