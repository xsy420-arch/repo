# Maintainer: vogan <voganwong@hotmail.com>

pkgname=cherry-studio-bin
_pkgname=cherry-studio
pkgver=1.7.19
pkgrel=1
pkgdesc="üçí Cherry Studio is a desktop client that supports for multiple LLM providers "
arch=('x86_64')
url="https://github.com/cherryHQ/cherry-studio"
license=('AGPL-3.0')
options=('!strip' '!debug')
depends=('fuse2')
source=("${_pkgname}-${pkgver}.AppImage::${url}/releases/download/v${pkgver}/Cherry-Studio-${pkgver}-${arch}.AppImage"
    "${_pkgname}.desktop"
    "${_pkgname}.png"
    "${pkgname}.sh")
sha256sums=('cf6dd1aadd2a00cd09b68316c32d970b09c38c5a3ede707eef4ea52b466b59ac'
            '5f1c37293040e803757fdf028ef904bd87aae38f8e98d9e427a282a2bceff971'
            '597463003798254ab97505e2374485e55262152483f717f3169da3444de60f94'
            '4c02050211a4288ff23a79896c1f771a5d671b1099a36c649e20a85a3b502b8f')
noextract=("${_pkgname}-${pkgver}.AppImage")
conflicts=("$_pkgname")

package() {
    cd "$srcdir"

    # Create directories
    install -dm755 "$pkgdir/usr/bin/$pkgname"
    install -dm755 "$pkgdir/usr/share/applications"
    install -dm755 "$pkgdir/usr/share/icons/hicolor/256x256/apps"

    # Install AppImage
    install -Dm755 "${_pkgname}-${pkgver}.AppImage" "${pkgdir}/opt/${pkgname}/${_pkgname}.AppImage"
    # Install icon
    install -Dm644 "$_pkgname.png" "$pkgdir/usr/share/icons/hicolor/256x256/apps/$_pkgname.png"
    # Install desktop file
    install -Dm644 "$_pkgname.desktop" "$pkgdir/usr/share/applications/$_pkgname.desktop"
    # Install cherry-studio-bin.sh
    install -m755 "${pkgname}.sh" "${pkgdir}/usr/bin/${_pkgname}"
}
