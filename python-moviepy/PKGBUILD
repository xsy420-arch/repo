# Maintainer: xsy420 <xsy0420@gmail.com>
pkgbase='python-moviepy'
pkgname=('python-moviepy')
_module='moviepy'
pkgver='2.2.0'
pkgrel=1
pkgdesc="Video editing with Python"
url="https://zulko.github.io/moviepy/"
depends=('python' 'python-decorator' 'python-numpy' 'python-pillow' 'python-imageio' 'python-proglog' 'python-imageio-ffmpeg')
depends+=('python-tqdm') # needed by python-proglog https://aur.archlinux.org/packages/python-proglog#comment-1012622
makedepends=('python-build' 'python-installer' 'python-setuptools')
license=('MIT')
arch=('any')
source=("https://files.pythonhosted.org/packages/source/${_module::1}/$_module/$_module-$pkgver.tar.gz")
sha256sums=('895e8f08a338eb1e3a9bcf793b66fff48ab496f28185e7923788d1751a249e7a')

build() {
    cd "${srcdir}/${_module}-${pkgver}"
    rm -rfv "tests/"
    python -m build --wheel --no-isolation
}

package() {
    cd "${srcdir}/${_module}-${pkgver}"
    python -m installer --destdir="$pkgdir" dist/*.whl
}
